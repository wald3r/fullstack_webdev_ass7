(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,n){e.exports=n(88)},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),l=n.n(c),o=n(15),u=n(7),s=n(91),i=Object(u.b)(function(e){return{notification:e.notification}})(function(e){return""===e.notification?null:r.a.createElement("div",null,e.notification&&r.a.createElement(s.a,{variant:"success"},e.notification))}),d=Object(u.b)(function(e){return{error:e.error}})(function(e){return""===e.error?null:r.a.createElement("div",null,e.error&&r.a.createElement(s.a,{variant:"danger"},e.error))}),m=n(14),f=n(25),p=n(3),E=n.n(p),b=n(5),g=n(16),v=n.n(g),h=null,O=function(){var e=Object(b.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/api/blogs","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y={getAll:O,create:function(){var e=Object(b.a)(E.a.mark(function e(t){var n,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,v.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){h="bearer ".concat(e)},update:w,remove:function(){var e=Object(b.a)(E.a.mark(function e(t){var n,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:h}},e.next=3,v.a.delete("".concat("/api/blogs","/").concat(t.id),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(b.a)(E.a.mark(function t(n){var a;return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.create(e);case 2:a=t.sent,n({type:"NEWBLOG",data:a});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},N=function(){return function(){var e=Object(b.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAll();case 2:n=e.sent,t({type:"INITBLOGS",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(b.a)(E.a.mark(function t(n){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.likes+=1,t.next=3,y.update(e);case 3:n({type:"LIKEBLOG",data:e});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(b.a)(E.a.mark(function t(n){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.remove(e);case 2:n({type:"REMOVEBLOG",data:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=null;switch(t.type){case"NEWBLOG":return[].concat(Object(f.a)(e),[t.data]).sort(function(e,t){return t.likes-e.likes});case"INITBLOGS":return t.data.sort(function(e,t){return t.likes-e.likes});case"ADDCOMMENT":case"LIKEBLOG":return n=e.filter(function(e){return e.id!==t.data.id}),[].concat(Object(f.a)(n),[t.data]).sort(function(e,t){return t.likes-e.likes});case"REMOVEBLOG":return n=e.filter(function(e){return e.id!==t.data.id}),Object(f.a)(n).sort(function(e,t){return t.likes-e.likes});default:return e}},C=function(e,t){return function(){var n=Object(b.a)(E.a.mark(function n(a){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"NOTIFICATION",data:e}),setTimeout(function(){a({type:"REMOVENOTIFICATION"})},t);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.data;case"REMOVENOTIFICATION":return"";default:return e}},S=function(e){return function(){var t=Object(b.a)(E.a.mark(function t(n){return E.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:window.localStorage.setItem("loggedBlogappUser",JSON.stringify(e)),y.setToken(e.token),n({type:"SETUSER",user:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"SETUSER":return t.user;case"REMOVEUSER":return null;default:return e}},U=function(e,t){return function(){var n=Object(b.a)(E.a.mark(function n(a){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"ERROR",data:e}),setTimeout(function(){a({type:"REMOVEERROR"})},t);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"ERROR":return t.data;case"REMOVEERROR":return"";default:return e}},I={getAll:function(){var e=Object(b.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(b.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getAll();case 2:n=e.sent,t({type:"GETALL",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETALL":return console.log(t.data),t.data;default:return e}},G=n(17),D=n(18),V={getAllUsers:L},F=Object(u.b)(function(e){return{users:e.users}},V)(function(e){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h1",null,"Users"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Blogs created"))),r.a.createElement("tbody",null,e.users.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(G.b,{to:"/users/".concat(e.id)},e.name)),r.a.createElement("td",null,e.blogs.length))}))))}),J=n(50),W=n(90),z=function(e){var t=e.handleAddBlog,n=e.handleTitleChange,a=e.handleAuthorChange,c=e.handleUrlChange,l=e.title,o=e.author,u=e.url;return r.a.createElement("form",{onSubmit:t},r.a.createElement("h1",null,"Add Blog"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-1"},"Title"),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("input",{value:l,onChange:n}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-1"},"Author"),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("input",{value:o,onChange:a}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-1"},"Url"),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("input",{value:u,onChange:c}))),r.a.createElement(W.a,{type:"submit"},"create"))},K=function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),c=n[0],l=n[1],o={display:c?"none":""},u={display:c?"":"none"},s=function(){l(!c)};return r.a.createElement("div",null,r.a.createElement("div",{style:o},r.a.createElement(W.a,{onClick:s,className:"button"},e.buttonLabel)),r.a.createElement("div",{style:u,className:"togglableContent"},e.children,r.a.createElement(W.a,{onClick:s},"cancel")))},H=function(e){var t=e.blog;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(G.b,{to:"/blogs/".concat(t.id)},t.title)))},P={initBlogs:N,addNewBlog:j,likeBlog:k,removeBlog:x,handleNotification:C,handleError:U},q=Object(u.b)(function(e){return{blogs:e.blogs,notification:e.notification,error:e.error,user:e.user}},P)(function(e){var t=Object(J.a)({},e),n=Object(a.useState)(""),c=Object(m.a)(n,2),l=c[0],o=c[1],u=Object(a.useState)(""),s=Object(m.a)(u,2),i=s[0],d=s[1],f=Object(a.useState)(""),p=Object(m.a)(f,2),E=p[0],b=p[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K,{buttonLabel:"new Blog"},r.a.createElement(z,{author:i,title:l,url:E,handleAuthorChange:function(e){var t=e.target;return d(t.value)},handleTitleChange:function(e){var t=e.target;return o(t.value)},handleUrlChange:function(e){var t=e.target;return b(t.value)},handleAddBlog:function(e){e.preventDefault(),console.log("adding blog",l,i,E);var n={title:l,author:i,url:E};t.addNewBlog(n),t.handleNotification("a new blog ".concat(l," by ").concat(i," added"),5e3),d(""),o(""),b(""),window.location.reload()}}))),r.a.createElement("br",null),r.a.createElement("table",{className:"table .table-striped"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"blogs added"))),r.a.createElement("tbody",null,t.blogs.map(function(e){return r.a.createElement(H,{key:e.id,blog:e})}))))}),Q=n(92),X=function(e){var t=e.username,n=e.password,a=e.handleSubmit;return r.a.createElement(Q.a,{onSubmit:a},r.a.createElement("h1",null,"login to application"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2"},"   Username:"),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("input",t))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-2"},"   Password:"),r.a.createElement("div",{className:"col-sm-1"},r.a.createElement("input",Object.assign({type:"password"},n)))),r.a.createElement(W.a,{type:"submit"},"login"))},Y={login:function(){var e=Object(b.a)(E.a.mark(function e(t){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},Z={handleNotification:C,handleError:U,setUser:S},$=Object(u.b)(function(e){return{notification:e.notification,error:e.error,user:e.user}},Z)(function(e){var t=e.handleNotification,n=e.username,a=e.password,c=e.handleError,l=e.resetusername,u=e.resetpasswd,s=e.setUser,i=(Object(o.a)(e,["handleNotification","username","password","handleError","resetusername","resetpasswd","setUser"]),function(){var e=Object(b.a)(E.a.mark(function e(r){var o;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),console.log("loggin in with: ",n.value,a.value),e.next=4,Y.login({username:n.value,password:a.value});case 4:void 0!==(o=e.sent)?(s(o),t("Login successfull!",5e3)):c("Login failed!",5e3),u(),l();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("div",null,r.a.createElement(X,{username:n,password:a,handleSubmit:i}))}),_={addCommentToBlog:function(e,t){return function(){var n=Object(b.a)(E.a.mark(function n(a){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.comments=e.comments.concat(t),n.next=3,y.update(e);case 3:a({type:"ADDCOMMENT",data:e});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}},ee=Object(u.b)(function(e){return{blogs:e.blogs}},_)(function(e){var t=e.blog,n=Object(o.a)(e,["blog"]),c=Object(a.useState)(""),l=Object(m.a)(c,2),u=l[0],s=l[1],i=function(){var e=Object(b.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.addCommentToBlog(t,u),s("");case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return console.log(t.comments),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:i},"COMMENT:",r.a.createElement("input",{value:u,onChange:function(e){var t=e.target;return s(t.value)}}),r.a.createElement(W.a,{type:"submit"},"submit")),r.a.createElement("table",{className:"table .table-striped"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Comments"))),r.a.createElement("tbody",null,t.comments.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e))}))))}),te={likeBlog:k,removeBlog:x,handleNotification:C},ne=Object(u.b)(function(e){return{blogs:e.blogs,notification:e.notification,error:e.error,user:e.user}},te)(function(e){var t=e.blog,n=Object(o.a)(e,["blog"]);if(void 0===t)return null;console.log("User:",n.user),console.log("Blog:",t);var a={display:n.user.id===t.user.id?"":"none"};return r.a.createElement("div",null,r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1,marginBottom:5}},r.a.createElement("p",null,t.title),r.a.createElement("p",null,t.author),r.a.createElement("p",null,t.url),r.a.createElement("p",null,t.likes," ",r.a.createElement(W.a,{onClick:function(){n.likeBlog(t),n.handleNotification("you liked blog ".concat(t.title," from author ").concat(t.author),5e3)}},"like")),r.a.createElement("div",{style:a},r.a.createElement(W.a,{onClick:function(){window.confirm("Do you really want to delete blog ".concat(t.title,"?"))&&(n.removeBlog(t),n.handleNotification("blog ".concat(t.title," by ").concat(t.author," got deleted"),5e3),n.history.push("/"))}},"remove")),r.a.createElement("br",null)),r.a.createElement(ee,{blog:t}))}),ae=Object(u.b)(function(e){return{blogs:e.blogs}},null)(function(e){var t=e.user,n=e.blogs;return void 0===t?(console.log("user is missing"),null):void 0===n?(console.log("blog is missing"),null):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h2",null,t.name),r.a.createElement("table",{className:"table .table-striped"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"added blogs"))),r.a.createElement("tbody",null,t.blogs.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title))}))))}),re={initBlogs:N,addNewBlog:j,likeBlog:k,removeBlog:x,handleNotification:C,handleError:U,setUser:S,removeUser:function(){return function(){var e=Object(b.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedBlogappUser"),t({type:"REMOVEUSER"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},getAllUsers:L},ce=Object(u.b)(function(e){return{blogs:e.blogs,notification:e.notification,error:e.error,user:e.user,users:e.users}},re)(function(e){var t=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1];return{type:e,value:r,onChange:function(e){c(e.target.value)},resetpasswd:function(){c("")}}}("password"),n=t.resetpasswd,c=Object(o.a)(t,["resetpasswd"]),l=function(e){var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1];return{type:e,value:r,onChange:function(e){c(e.target.value)},resetusername:function(){c("")}}}("username"),u=l.resetusername,s=Object(o.a)(l,["resetusername"]),f={padding:5};Object(a.useEffect)(function(){e.initBlogs();var t=window.localStorage.getItem("loggedBlogappUser");if(t){var n=JSON.parse(t);e.getAllUsers(),e.setUser(n)}},[]);var p=function(t){return e.blogs.find(function(e){return e.id===t})},E=function(t){return e.users.find(function(e){return e.id===t})};return null===e.user?r.a.createElement("div",null,r.a.createElement(i,null),r.a.createElement(d,null),r.a.createElement(G.a,null,r.a.createElement(D.a,{exact:!0,path:"/",render:function(e){return r.a.createElement($,Object.assign({},e,{username:s,password:c,resetpasswd:function(){return n()},resetusername:function(){return u()}}))}}))):r.a.createElement("div",{className:"container"},r.a.createElement(i,null),r.a.createElement(d,null),r.a.createElement(G.a,null,r.a.createElement("div",null,r.a.createElement("h1",null,"Blog app"),r.a.createElement(G.b,{style:f,to:"/"},"Home"),r.a.createElement(G.b,{style:f,to:"/users"},"Users"),e.user.username," is logged in ",r.a.createElement(W.a,{onClick:function(){try{e.removeUser(),e.handleNotification("Logout successfully, 5000")}catch(t){e.handleError("Logout failed!",5e3)}}},"logout")),r.a.createElement(D.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(q,e)}}),r.a.createElement(D.a,{exact:!0,path:"/users",render:function(e){return r.a.createElement(F,e)}}),r.a.createElement(D.a,{exact:!0,path:"/blogs/:id",render:function(e){var t=e.match,n=Object(o.a)(e,["match"]);return r.a.createElement(ne,Object.assign({},n,{blog:p(t.params.id)}))}}),r.a.createElement(D.a,{exact:!0,path:"/users/:id",render:function(e){var t=e.match,n=Object(o.a)(e,["match"]);return r.a.createElement(ae,Object.assign({},n,{user:E(t.params.id)}))}})))}),le=n(20),oe=n(51),ue=n(52),se=Object(le.combineReducers)({blogs:B,notification:T,error:A,user:R,users:M}),ie=Object(le.createStore)(se,Object(ue.composeWithDevTools)(Object(le.applyMiddleware)(oe.a)));l.a.render(r.a.createElement(u.a,{store:ie},r.a.createElement(ce,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.fe1b4ffd.chunk.js.map