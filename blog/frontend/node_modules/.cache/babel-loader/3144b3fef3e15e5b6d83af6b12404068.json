{"ast":null,"code":"import _objectWithoutProperties from \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/src/App.js\";\n\n/* eslint-disable no-unused-labels */\nimport React, { useEffect } from 'react';\nimport Notification from './components/Notification';\nimport Error from './components/Error';\nimport { useUsername, usePassword } from './hooks';\nimport { initBlogs, addNewBlog, likeBlog, removeBlog } from './reducers/blogReducer';\nimport { handleNotification } from './reducers/notificationReducer';\nimport { setUser, removeUser } from './reducers/userReducer';\nimport { handleError } from './reducers/errorReducer';\nimport { getAllUsers } from './reducers/usersReducer';\nimport { connect } from 'react-redux';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport UserInformation from './components/UserInformation';\nimport Home from './components/Home';\nimport Login from './components/Login';\nimport { Button } from 'react-bootstrap';\nimport BlogInfo from './components/BlogInfo';\n\nconst App = props => {\n  const _usePassword = usePassword('password'),\n        resetpasswd = _usePassword.resetpasswd,\n        password = _objectWithoutProperties(_usePassword, [\"resetpasswd\"]);\n\n  const _useUsername = useUsername('username'),\n        resetusername = _useUsername.resetusername,\n        username = _objectWithoutProperties(_useUsername, [\"resetusername\"]);\n\n  const padding = {\n    padding: 5\n  };\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      props.getAllUsers();\n      props.setUser(user);\n      props.initBlogs();\n    }\n  }, []);\n\n  const findBlogById = id => {\n    const blog = props.findBlog(id);\n    console.log(blog);\n    return blog;\n  };\n\n  const handleLogout = () => {\n    try {\n      props.removeUser();\n      props.handleNotification('Logout successfully, 5000');\n    } catch (exception) {\n      props.handleError('Logout failed!', 5000);\n    }\n  };\n\n  if (props.user === null) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Notification, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(Error, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => React.createElement(Login, Object.assign({}, props, {\n        username: username,\n        password: password,\n        resetpasswd: () => resetpasswd(),\n        resetusername: () => resetusername(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    })));\n  } else {\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Notification, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(Error, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Blog app\"), React.createElement(Link, {\n      style: padding,\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Home\"), React.createElement(Link, {\n      style: padding,\n      to: \"/users\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Users\"), props.user.username, \" is logged in \", React.createElement(Button, {\n      onClick: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"logout\")), React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: props => React.createElement(Home, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/users\",\n      render: props => React.createElement(UserInformation, Object.assign({}, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/blogs/:id\",\n      render: ({\n        match\n      }) => React.createElement(BlogInfo, {\n        blog: findBlogById(match.params.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    })));\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.blogs,\n    notification: state.notification,\n    error: state.error,\n    user: state.user,\n    users: state.users\n  };\n};\n\nconst mapDispatchToProps = {\n  initBlogs,\n  addNewBlog,\n  likeBlog,\n  removeBlog,\n  handleNotification,\n  handleError,\n  setUser,\n  removeUser,\n  getAllUsers\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/src/App.js"],"names":["React","useEffect","Notification","Error","useUsername","usePassword","initBlogs","addNewBlog","likeBlog","removeBlog","handleNotification","setUser","removeUser","handleError","getAllUsers","connect","BrowserRouter","Router","Route","Link","UserInformation","Home","Login","Button","BlogInfo","App","props","resetpasswd","password","resetusername","username","padding","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","findBlogById","id","blog","findBlog","console","log","handleLogout","exception","match","params","mapStateToProps","state","blogs","notification","error","users","mapDispatchToProps"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-labels */\nimport React, { useEffect } from 'react'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\nimport { useUsername, usePassword } from './hooks'\nimport { initBlogs, addNewBlog, likeBlog, removeBlog } from './reducers/blogReducer'\nimport { handleNotification } from './reducers/notificationReducer'\nimport { setUser, removeUser } from './reducers/userReducer'\nimport { handleError } from './reducers/errorReducer'\nimport { getAllUsers } from './reducers/usersReducer'\nimport { connect } from 'react-redux'\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom'\nimport UserInformation from './components/UserInformation'\nimport Home from './components/Home'\nimport Login from './components/Login'\nimport { Button } from 'react-bootstrap'\nimport BlogInfo from './components/BlogInfo'\n\nconst App = ( props ) => {\n\n    const { resetpasswd, ...password } = usePassword('password')\n    const { resetusername, ...username } = useUsername('username')\n\n    const padding = { padding: 5 }\n\n    useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n        if (loggedUserJSON) {\n            const user = JSON.parse(loggedUserJSON)\n            props.getAllUsers()\n            props.setUser(user)\n            props.initBlogs()\n        }\n    }, [])\n\n    const findBlogById = (id) => {\n        const blog = props.findBlog(id)\n        console.log(blog)\n        return blog\n    }\n\n    const handleLogout = () => {\n        try{\n            props.removeUser()\n            props.handleNotification('Logout successfully, 5000')\n        }catch(exception){\n            props.handleError('Logout failed!', 5000)\n        }\n    }\n    if(props.user === null){\n        return(\n            <div>\n                <Notification />\n                <Error />\n                <Router>\n                    <Route exact path='/' render={(props) =>\n                        <Login\n                            {...props}\n                            username={username}\n                            password={password}\n                            resetpasswd={() => resetpasswd()}\n                            resetusername={() => resetusername()}\n                        /> } />\n                </Router>\n            </div>\n        )\n    }else{\n        return(\n            <div className='container'>\n                <Notification />\n                <Error />\n                <Router>\n                    <div>\n                        <h1>Blog app</h1>\n                        <Link style={padding} to='/'>Home</Link>\n                        <Link style={padding} to='/users'>Users</Link>\n                        {props.user.username} is logged in <Button onClick={handleLogout}>logout</Button>\n                    </div>\n                    <Route exact path='/' render={(props) => <Home {...props}/>} />\n                    <Route exact path='/users' render={(props) => <UserInformation {...props}/> } />\n                    <Route exact path='/blogs/:id' render={({ match }) => <BlogInfo blog={findBlogById(match.params.id)} />} />\n                </Router>\n            </div>\n        )\n    }\n}\n\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n        blogs: state.blogs,\n        notification: state.notification,\n        error: state.error,\n        user: state.user,\n        users: state.users,\n    }\n}\n\nconst mapDispatchToProps = {\n    initBlogs,\n    addNewBlog,\n    likeBlog,\n    removeBlog,\n    handleNotification,\n    handleError,\n    setUser,\n    removeUser,\n    getAllUsers,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)"]},"metadata":{},"sourceType":"module"}