{"ast":null,"code":"import _slicedToArray from \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass5/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass5/frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport loginService from './services/login';\nimport Blog from './components/Blog';\nimport blogService from './services/blogs';\nimport Notifications from './components/Notifications';\n\nconst App = () => {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        username = _useState2[0],\n        setUsername = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        password = _useState4[0],\n        setPassword = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        user = _useState6[0],\n        setUser = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        blogs = _useState8[0],\n        setBlogs = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        title = _useState10[0],\n        setTitle = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        author = _useState12[0],\n        setAuthor = _useState12[1];\n\n  const _useState13 = useState(''),\n        _useState14 = _slicedToArray(_useState13, 2),\n        url = _useState14[0],\n        setUrl = _useState14[1];\n\n  const _useState15 = useState(''),\n        _useState16 = _slicedToArray(_useState15, 2),\n        notification = _useState16[0],\n        setNotification = _useState16[1];\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n    }\n  }, []);\n\n  const handleLogout = () => {\n    setUser(null);\n    window.localStorage.removeItem('loggedBlogappUser');\n  };\n\n  const handleLogin = async event => {\n    event.preventDefault();\n    console.log('loggin in with', username, password);\n\n    try {\n      const newUser = await loginService.login({\n        username,\n        password\n      });\n      window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user));\n      setNotification('Login successfull');\n      setTimeout(() => {\n        setNotification('');\n      }, 5000);\n      const allBlogs = await blogService.getAll();\n      setUser(newUser);\n      setBlogs(allBlogs);\n      console.log(newUser);\n      blogService.setToken(newUser.token);\n      setPassword('');\n      setUsername('');\n    } catch (exception) {}\n  };\n\n  const handleAddBlog = async event => {\n    event.preventDefault();\n    console.log('adding blog', title, author, url);\n    const newBlog = {\n      title: title,\n      author: author,\n      url: url,\n      user: user\n    };\n    console.log(newBlog);\n    const response = await blogService.create(newBlog);\n    setBlogs(blogs.concat(response));\n    setAuthor('');\n    setTitle('');\n    setUrl('');\n  };\n\n  const loginForm = () => React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"log in to application\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"username \", React.createElement(\"input\", {\n    value: username,\n    onChange: ({\n      target\n    }) => setUsername(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"password \", React.createElement(\"input\", {\n    value: password,\n    type: \"Password\",\n    name: \"Password\",\n    onChange: ({\n      target\n    }) => setPassword(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"login\"));\n\n  const addBlogForm = () => React.createElement(\"form\", {\n    onSubmit: handleAddBlog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Add Blog\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"title \", React.createElement(\"input\", {\n    value: title,\n    onChange: ({\n      target\n    }) => setTitle(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"author \", React.createElement(\"input\", {\n    value: author,\n    onChange: ({\n      target\n    }) => setAuthor(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"url \", React.createElement(\"input\", {\n    value: url,\n    onChange: ({\n      target\n    }) => setUrl(target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"create\"));\n\n  if (user === null) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Notifications, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), loginForm());\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Notifications, {\n      message: notification,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, user.username, \" is logged in\", React.createElement(\"button\", {\n      onClick: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"logout\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, addBlogForm()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, blogs.map(blog => React.createElement(Blog, {\n      key: blog.id,\n      blog: blog,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))));\n  }\n};\n\nexport default App;","map":{"version":3,"sources":["/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass5/frontend/src/App.js"],"names":["React","useState","useEffect","loginService","Blog","blogService","Notifications","App","username","setUsername","password","setPassword","user","setUser","blogs","setBlogs","title","setTitle","author","setAuthor","url","setUrl","notification","setNotification","loggedUserJSON","window","localStorage","getItem","JSON","parse","handleLogout","removeItem","handleLogin","event","preventDefault","console","log","newUser","login","setItem","stringify","setTimeout","allBlogs","getAll","setToken","token","exception","handleAddBlog","newBlog","response","create","concat","loginForm","target","value","addBlogForm","map","blog","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport loginService from './services/login'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport Notifications from './components/Notifications'\n\nconst App = () => {\n\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [user, setUser] = useState(null)\n    const [blogs, setBlogs] = useState([])\n    const [title, setTitle] = useState('')\n    const [author, setAuthor] = useState('')\n    const [url, setUrl] = useState('')\n    const [notification, setNotification] = useState('')\n\n\n    useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n            if (loggedUserJSON) {\n                const user = JSON.parse(loggedUserJSON)\n                setUser(user)\n            }\n    }, [])\n\n\n    const handleLogout = () => {\n\n        setUser(null)\n        window.localStorage.removeItem('loggedBlogappUser')\n    }\n\n    const handleLogin = async event => {\n        event.preventDefault()\n        console.log('loggin in with', username, password)\n        try{\n            const newUser = await loginService.login({username, password})\n            window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user)) \n            setNotification('Login successfull')\n            setTimeout(() => { setNotification('')}, 5000)\n            const allBlogs = await blogService.getAll()\n            setUser(newUser)\n            setBlogs(allBlogs)\n            console.log(newUser)\n\n            blogService.setToken(newUser.token)\n            \n            setPassword('')\n            setUsername('')\n\n        }catch(exception){\n\n        }\n\n    }\n\n    const handleAddBlog = async event => {\n        event.preventDefault()\n        console.log('adding blog', title, author, url)\n\n        const newBlog = {\n                        title: title,\n                        author: author,\n                        url: url,\n                        user: user\n        }\n        console.log(newBlog)\n        const response = await blogService.create(newBlog)\n        setBlogs(blogs.concat(response))\n        setAuthor('')\n        setTitle('')\n        setUrl('')\n}\n\n\n\n    const loginForm = () => (\n        <form onSubmit={handleLogin}> \n           <h1>log in to application</h1>\n           <div>\n                username <input value={username}\n                                onChange={({ target }) => setUsername(target.value)}\n                         />\n            </div>\n            <div> \n                password <input value={password}\n                                type=\"Password\"\n                                name=\"Password\"\n                                onChange={({ target }) => setPassword(target.value)}\n                         />\n            </div>\n                <button type=\"submit\">login</button>\n        </form>\n    )\n\n    const addBlogForm = () => (\n\n        <form onSubmit={handleAddBlog}> \n           <h1>Add Blog</h1>\n           <div>\n                title <input value={title}\n                                onChange={({ target }) => setTitle(target.value)}\n                         />\n            </div>\n            <div> \n                author <input value={author}\n                                onChange={({ target }) => setAuthor(target.value)}\n                         />\n            </div>\n            <div>\n                url <input value={url}\n                                onChange={({ target }) => setUrl(target.value)}\n                         />\n            </div>\n                <button type=\"submit\">create</button>\n        </form>\n\n\n    )\n\n   if(user === null){\n       return(\n           <div>\n               <Notifications /> \n               {loginForm()}\n           </div>\n       )\n   }else{\n       return(\n            <div>\n                <Notifications message={notification} /> \n                <div>\n                    {user.username} is logged in\n                    <button onClick={handleLogout}>logout</button>\n                </div>\n                <div>\n                    {addBlogForm()}\n                </div>\n                <div>\n                    {blogs.map(blog => <Blog key={blog.id} blog={blog} /> )}\n                </div>\n            </div>\n       )\n   }\n}\n\n\nexport default App"]},"metadata":{},"sourceType":"module"}