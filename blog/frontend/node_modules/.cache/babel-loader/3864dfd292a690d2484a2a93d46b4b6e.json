{"ast":null,"code":"import _slicedToArray from \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/src/App.js\";\n\n/* eslint-disable no-unused-labels */\nimport React, { useState, useEffect } from 'react';\nimport Notification from './components/Notification';\nimport Error from './components/Error';\nimport { useUsername, usePassword } from './hooks';\nimport { initBlogs, addNewBlog, likeBlog, removeBlog } from './reducers/blogReducer';\nimport { handleNotification } from './reducers/notificationReducer';\nimport { setUser, removeUser } from './reducers/userReducer';\nimport { handleError } from './reducers/errorReducer';\nimport { connect } from 'react-redux';\nimport blogService from './services/blogs';\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from 'react-router-dom';\nimport UserInformation from './components/UserInformation';\nimport Home from './components/Home';\nimport Login from './components/Login';\n\nconst App = props => {\n  const _useUsername = useUsername('username'),\n        username = _useUsername.username;\n\n  const _usePassword = usePassword('password'),\n        password = _usePassword.password;\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        user = _useState2[0],\n        setUser = _useState2[1];\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser');\n\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user); //window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user))\n\n      blogService.setToken(user.token); //props.setUser(user)\n      //props.initBlogs()\n    }\n  }, [props]);\n\n  const handleLogout = () => {\n    try {\n      //props.removeUser()\n      setUser(null);\n      window.localStorage.removeItem('loggedBlogappUser');\n      props.handleNotification('Logout successfully, 5000');\n    } catch (exception) {\n      props.handleError('Logout failed!', 5000);\n    }\n  };\n\n  if (user === null) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(Notification, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(Error, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/login\",\n      render: () => React.createElement(Login, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    })));\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Notification, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(Error, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, username.value, \" is logged in\", React.createElement(\"button\", {\n      onClick: handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"logout\")), React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      render: () => React.createElement(Home, {\n        user: user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/users\",\n      render: () => React.createElement(UserInformation, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })));\n  }\n};\n\nconst mapStateToProps = state => {\n  return {\n    blogs: state.blogs,\n    notification: state.notification,\n    error: state.error,\n    user: state.user\n  };\n};\n\nconst mapDispatchToProps = {\n  initBlogs,\n  addNewBlog,\n  likeBlog,\n  removeBlog,\n  handleNotification,\n  handleError,\n  setUser,\n  removeUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/walder/workspaces/fullstack_webdev/fullstack_webdev_ass7/blog/frontend/src/App.js"],"names":["React","useState","useEffect","Notification","Error","useUsername","usePassword","initBlogs","addNewBlog","likeBlog","removeBlog","handleNotification","setUser","removeUser","handleError","connect","blogService","BrowserRouter","Router","Route","Link","Redirect","withRouter","UserInformation","Home","Login","App","props","username","password","user","loggedUserJSON","window","localStorage","getItem","JSON","parse","setToken","token","handleLogout","removeItem","exception","value","mapStateToProps","state","blogs","notification","error","mapDispatchToProps"],"mappings":"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","sourcesContent":["/* eslint-disable no-unused-labels */\nimport React, { useState, useEffect } from 'react'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\nimport { useUsername, usePassword } from './hooks'\nimport { initBlogs, addNewBlog, likeBlog, removeBlog } from './reducers/blogReducer'\nimport { handleNotification } from './reducers/notificationReducer'\nimport { setUser, removeUser } from './reducers/userReducer'\nimport { handleError } from './reducers/errorReducer'\nimport { connect } from 'react-redux'\nimport blogService from './services/blogs'\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from 'react-router-dom'\nimport UserInformation from './components/UserInformation'\nimport Home from './components/Home'\nimport Login from './components/Login'\n\nconst App = ( props ) => {\n\n    const { username } = useUsername('username')\n    const { password } = usePassword('password')\n    const [user, setUser] = useState(null)\n\n    useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedBlogappUser')\n        if (loggedUserJSON) {\n            const user = JSON.parse(loggedUserJSON)\n            setUser(user)\n            //window.localStorage.setItem('loggedBlogappUser', JSON.stringify(user))\n            blogService.setToken(user.token)\n            //props.setUser(user)\n            //props.initBlogs()\n        }\n    }, [props])\n\n    const handleLogout = () => {\n        try{\n            //props.removeUser()\n            setUser(null)\n            window.localStorage.removeItem('loggedBlogappUser')\n            props.handleNotification('Logout successfully, 5000')\n        }catch(exception){\n            props.handleError('Logout failed!', 5000)\n        }\n    }\n\n    if(user === null){\n        return(\n            <div>\n                <Notification />\n                <Error />\n                <Router>\n                    <Route path='/login' render={() => <Login /> } />\n                </Router>\n            </div>\n        )\n    }else{\n        return(\n            <div>\n                <Notification />\n                <Error />\n                <div>\n                    {username.value} is logged in\n                    <button onClick={handleLogout}>logout</button>\n                </div>\n                <Router>\n                    <Route exact path='/' render={() => <Home user={user}/>} />\n                    <Route path='/users' render={() => <UserInformation /> } />\n                </Router>\n            </div>\n        )\n    }\n}\n\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n        blogs: state.blogs,\n        notification: state.notification,\n        error: state.error,\n        user: state.user,\n    }\n}\n\nconst mapDispatchToProps = {\n    initBlogs,\n    addNewBlog,\n    likeBlog,\n    removeBlog,\n    handleNotification,\n    handleError,\n    setUser,\n    removeUser,\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)"]},"metadata":{},"sourceType":"module"}